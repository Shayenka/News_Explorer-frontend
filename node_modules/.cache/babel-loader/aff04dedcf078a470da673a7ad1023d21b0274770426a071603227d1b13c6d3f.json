{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shaye\\\\Proyecto_Final\\\\News_Explorer\\\\news-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n  _s = $RefreshSig$();\nimport \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\n// import ProtectedRoute from \"../components/ProtectedRoute\";\nimport { CurrentUserContext } from \".../contexts/CurrentUserContext\";\n\n// import Main from \"./Main\";\nimport Header from \"./Header\";\n// import Register from \"./Register\";\n// import Footer from \"./Footer\";\n\n// import Api from \"../utils/api.js\";\n// import { registerUser, checkTokenValidity } from \"../utils/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isLoginProfilePopupOpen, setIsLoginProfilePopupOpen] = useState(false);\n  const [isRegisterProfilePopupOpen, setIsRegisterProfilePopupOpen] = useState(false);\n\n  // const [cards, setCards] = useState([]);\n\n  const [token, setToken] = useState(null);\n  const api = new Api({\n    address: \"http://127.0.0.1:3000\"\n  });\n  const [currentUser, setCurrentUser] = useState({\n    email: null\n  });\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      checkTokenValidity(token).then(userData => {\n        setToken(token);\n        setIsLoggedIn(true);\n        setCurrentUser(userData);\n        navigate(\"/\");\n      }).catch(error => {\n        console.error(\"Error de token:\", error);\n      });\n    } else {\n      setIsLoggedIn(false);\n    }\n  }, []);\n  useEffect(() => {\n    if (token) {\n      api.getUserInfo(token).then(response => {\n        setCurrentUser(response.user);\n      }).catch(error => {\n        console.log(\"Error al obtener los datos del usuario:\", error);\n      });\n    }\n  }, [token]);\n  function handleloginProfile() {\n    setIsLoginProfilePopupOpen(true);\n  }\n  function handlelRegisterProfile() {\n    setIsRegisterProfilePopupOpen(true);\n  }\n  async function handleRegisterUser(email, password) {\n    try {\n      const response = await registerUser(email, password);\n      return response;\n    } catch (error) {\n      console.error(\"Error en el registro de usuario:\", error);\n      throw error;\n    }\n  }\n  function handleLogin(data) {\n    localStorage.setItem(\"jwt\", data.token);\n    setToken(data.token);\n    setIsLoggedIn(true);\n  }\n  function handleLogout() {\n    console.log(\"Logging out...\");\n    localStorage.removeItem(\"jwt\");\n    setToken(null);\n    setIsLoggedIn(false);\n    navigate(\"/signin\");\n  }\n  function handleCardAdd(card) {\n    //     const isLiked = card.likes.some((owner) => owner === currentUser._id);\n\n    //     api.changeLikeCardStatus(token, card._id, !isLiked).then((newCard) => {\n    //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    //     });\n    //   }\n\n    function handleCardDelete(card) {\n      api.deleteCard(token, card._id).then(() => {\n        setCards(cards.filter(item => {\n          return item._id !== card._id;\n        }));\n      });\n    }\n    function closeAllPopups() {\n      setIsLoginProfilePopupOpen(false);\n      setIsRegisterProfilePopupOpen(false);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page\",\n        children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n          value: currentUser,\n          children: /*#__PURE__*/_jsxDEV(Header, {\n            loggedIn: isLoggedIn,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(App, \"SaXAYgcX3v/098Uphbc+6Q5EkLI=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","CurrentUserContext","Header","jsxDEV","_jsxDEV","App","_s","isLoginProfilePopupOpen","setIsLoginProfilePopupOpen","isRegisterProfilePopupOpen","setIsRegisterProfilePopupOpen","token","setToken","api","Api","address","currentUser","setCurrentUser","email","isLoggedIn","setIsLoggedIn","navigate","localStorage","getItem","checkTokenValidity","then","userData","catch","error","console","getUserInfo","response","user","log","handleloginProfile","handlelRegisterProfile","handleRegisterUser","password","registerUser","handleLogin","data","setItem","handleLogout","removeItem","handleCardAdd","card","handleCardDelete","deleteCard","_id","setCards","cards","filter","item","closeAllPopups","className","children","Provider","value","loggedIn","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/shaye/Proyecto_Final/News_Explorer/news-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import \"./App.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\r\n// import ProtectedRoute from \"../components/ProtectedRoute\";\r\nimport { CurrentUserContext } from \".../contexts/CurrentUserContext\";\r\n\r\n// import Main from \"./Main\";\r\nimport Header from \"./Header\";\r\n// import Register from \"./Register\";\r\n// import Footer from \"./Footer\";\r\n\r\n// import Api from \"../utils/api.js\";\r\n// import { registerUser, checkTokenValidity } from \"../utils/auth\";\r\n\r\nfunction App() {\r\n  const [isLoginProfilePopupOpen, setIsLoginProfilePopupOpen] = useState(false);\r\n  const [isRegisterProfilePopupOpen, setIsRegisterProfilePopupOpen] =\r\n    useState(false);\r\n\r\n  // const [cards, setCards] = useState([]);\r\n\r\n  const [token, setToken] = useState(null);\r\n\r\n  const api = new Api({\r\n    address: \"http://127.0.0.1:3000\",\r\n  });\r\n\r\n  const [currentUser, setCurrentUser] = useState({ email: null });\r\n\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n\r\n    if (token) {\r\n      checkTokenValidity(token)\r\n        .then((userData) => {\r\n          setToken(token);\r\n          setIsLoggedIn(true);\r\n          setCurrentUser(userData);\r\n          navigate(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error de token:\", error);\r\n        });\r\n    } else {\r\n      setIsLoggedIn(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      api\r\n        .getUserInfo(token)\r\n        .then((response) => {\r\n          setCurrentUser(response.user);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error al obtener los datos del usuario:\", error);\r\n        });\r\n    }\r\n  }, [token]);\r\n\r\n  function handleloginProfile() {\r\n    setIsLoginProfilePopupOpen(true);\r\n  }\r\n\r\n  function handlelRegisterProfile() {\r\n    setIsRegisterProfilePopupOpen(true);\r\n  }\r\n\r\n  async function handleRegisterUser(email, password) {\r\n    try {\r\n      const response = await registerUser(email, password);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error en el registro de usuario:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  function handleLogin(data) {\r\n    localStorage.setItem(\"jwt\", data.token);\r\n    setToken(data.token);\r\n    setIsLoggedIn(true);\r\n  }\r\n\r\n  function handleLogout() {\r\n    console.log(\"Logging out...\");\r\n    localStorage.removeItem(\"jwt\");\r\n    setToken(null);\r\n    setIsLoggedIn(false);\r\n    navigate(\"/signin\");\r\n  }\r\n\r\n  function handleCardAdd(card) {\r\n    //     const isLiked = card.likes.some((owner) => owner === currentUser._id);\r\n\r\n    //     api.changeLikeCardStatus(token, card._id, !isLiked).then((newCard) => {\r\n    //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n    //     });\r\n    //   }\r\n\r\n    function handleCardDelete(card) {\r\n      api.deleteCard(token, card._id).then(() => {\r\n        setCards(\r\n          cards.filter((item) => {\r\n            return item._id !== card._id;\r\n          })\r\n        );\r\n      });\r\n    }\r\n\r\n    function closeAllPopups() {\r\n      setIsLoginProfilePopupOpen(false);\r\n      setIsRegisterProfilePopupOpen(false);\r\n    }\r\n\r\n    return (\r\n      <div className=\"body\">\r\n        <div className=\"page\">\r\n          <CurrentUserContext.Provider value={currentUser}>\r\n             <Header loggedIn={isLoggedIn} onLogout={handleLogout} />\r\n            {/* <Routes>\r\n              <Route\r\n                path=\"/signin\"\r\n                element={\r\n                  <Login onLoggedIn={handleLogin} loggedIn={isLoggedIn} />\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/signup\"\r\n                element={\r\n                  <Register\r\n                    onRegister={handleRegisterUser}\r\n                    loggedIn={isLoggedIn}\r\n                  />\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/\"\r\n                element={\r\n                  <ProtectedRoute\r\n                    loggedIn={isLoggedIn}\r\n                    component={Main}\r\n                    cards={cards}\r\n                    onCardAdd={handleCardAdd}\r\n                    onCardDelete={handleCardDelete}\r\n                  />\r\n                }\r\n              />\r\n            </Routes>\r\n\r\n            <Footer /> */}\r\n          </CurrentUserContext.Provider>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}