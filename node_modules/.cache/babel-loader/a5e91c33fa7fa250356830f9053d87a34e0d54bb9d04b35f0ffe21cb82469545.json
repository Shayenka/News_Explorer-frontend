{"ast":null,"code":"const BASE_URL = \"http://127.0.0.1:3000\";\nconst API_KEY = \"016f14e7761d4baca1c75b200bde1015\";\nclass Api {\n  constructor({\n    address,\n    apiKey\n  }) {\n    this.address = address;\n    this.apiKey = apiKey;\n  }\n  async _useFetch(token, url, method, body) {\n    try {\n      const response = await fetch(url, {\n        headers: {\n          authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        },\n        method,\n        body: JSON.stringify(body)\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(`API Error: ${error.message || \"Unknown error\"}`);\n      }\n      return response.json();\n    } catch (error) {\n      throw new Error(`Network Error: ${error.message || \"Unknown error\"}`);\n    }\n  }\n  async getUserInfo(token) {\n    try {\n      const result = await this._useFetch(token, `${BASE_URL}/users/me`, \"GET\");\n      console.log(\"getUserInfo result:\", result);\n      return result;\n    } catch (error) {\n      console.error(\"getUserInfo error:\", error.message);\n      throw error;\n    }\n  }\n  async getCards(token) {\n    try {\n      const result = await this._useFetch(token, `${BASE_URL}/cards`, \"GET\");\n      return result;\n    } catch (error) {\n      console.error(\"getCards error:\", error.message);\n      throw error;\n    }\n  }\n  async changeSalvedCardStatus(token, cardId, isSaved) {\n    const method = isSaved ? \"PUT\" : \"DELETE\";\n    try {\n      const result = await this._useFetch(token, `${BASE_URL}/saved-news${cardId}`, method);\n      return result;\n    } catch (error) {\n      console.error(\"changeSalvedCardStatus error:\", error.message);\n      throw error;\n    }\n  }\n  async deleteCard(token, cardId) {\n    try {\n      const result = await this._useFetch(token, `${BASE_URL}/cards/${cardId}`, \"DELETE\");\n      return result;\n    } catch (error) {\n      console.error(\"deleteCard error:\", error.message);\n      throw error;\n    }\n  }\n}\nexport default Api;","map":{"version":3,"names":["BASE_URL","API_KEY","Api","constructor","address","apiKey","_useFetch","token","url","method","body","response","fetch","headers","authorization","JSON","stringify","ok","error","json","Error","message","getUserInfo","result","console","log","getCards","changeSalvedCardStatus","cardId","isSaved","deleteCard"],"sources":["C:/Users/shaye/Proyecto_Final/News_Explorer/news-explorer-frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:3000\";\r\nconst API_KEY = \"016f14e7761d4baca1c75b200bde1015\";\r\n\r\nclass Api {\r\n  constructor({ address, apiKey }) {\r\n    this.address = address;\r\n    this.apiKey = apiKey;\r\n  }\r\n\r\n  async _useFetch(token, url, method, body) {\r\n    try {\r\n      const response = await fetch(url, {\r\n        headers: {\r\n          authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        method,\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(`API Error: ${error.message || \"Unknown error\"}`);\r\n      }\r\n\r\n      return response.json();\r\n    } catch (error) {\r\n      throw new Error(`Network Error: ${error.message || \"Unknown error\"}`);\r\n    }\r\n  }\r\n\r\n  async getUserInfo(token) {\r\n    try {\r\n      const result = await this._useFetch(token, `${BASE_URL}/users/me`, \"GET\");\r\n      console.log(\"getUserInfo result:\", result);\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"getUserInfo error:\", error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getCards(token) {\r\n    try {\r\n      const result = await this._useFetch(token, `${BASE_URL}/cards`, \"GET\");\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"getCards error:\", error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async changeSalvedCardStatus(token, cardId, isSaved) {\r\n    const method = isSaved ? \"PUT\" : \"DELETE\";\r\n    try {\r\n      const result = await this._useFetch(\r\n        token,\r\n        `${BASE_URL}/saved-news${cardId}`,\r\n        method\r\n      );\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"changeSalvedCardStatus error:\", error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async deleteCard(token, cardId) {\r\n    try {\r\n      const result = await this._useFetch(token, `${BASE_URL}/cards/${cardId}`, \"DELETE\");\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"deleteCard error:\", error.message);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}